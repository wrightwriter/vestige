// Generated with Shader Minifier 1.4.0 (https://github.com/laurentlb/Shader_Minifier/)
#ifndef SHADER_INCLUDES_H_
# define SHADER_INCLUDES_H_

static const char* music_comp =
 "#version 460\n"
 "layout(local_size_x=256)in;"
 "layout(std430,binding=0) buffer Aa{vec2 i[];};"
 "layout(location=0) uniform int offs;"
 "float f=2.*acos(-1.);"
 "uvec3 t(uvec3 f)"
 "{"
   "f=f*1664525u+1013904223u;"
   "f.x+=f.y*f.z;"
   "f.y+=f.z*f.x;"
   "f.z+=f.x*f.y;"
   "f^=f>>16u;"
   "f.x+=f.y*f.z;"
   "f.y+=f.z*f.x;"
   "f.z+=f.x*f.y;"
   "return f;"
 "}"
 "vec3 s(vec3 f)"
 "{"
   "uvec3 T=t(floatBitsToUint(f*125.12));"
   "return vec3(T)/float(-1u);"
 "}"
 "vec3 p(vec3 f)"
 "{"
   "f+=12.124;"
   "uvec3 T=floatBitsToUint(f);"
   "T=(T>>16u^T.yzx)*1111111111u;"
   "T=(T>>16u^T.yzx)*1111111111u;"
   "T=(T>>16u^T.yzx)*1111111111u;"
   "return vec3(T)/float(-1u);"
 "}"
 "vec3 n(float f)"
 "{"
   "return p(vec3(f));"
 "}"
 "float d(float f)"
 "{"
   "return 440.*pow(2.,f/12.);"
 "}"
 "mat2 r(float f)"
 "{"
   "return mat2(cos(f),-sin(f),sin(f),cos(f));"
 "}"
 "vec3 d(vec3 f,float T,float u)"
 "{"
   "vec4 v=vec4(0);"
   "for(int i=0;i++<5;)"
     "f.yz*=r(4.5),f.xy*=r(1.5),f+=sin(f.zxy),v=(v+vec4(cross(cos(f),sin(f.yzx)),1))/T,f*=u;"
   "return v.xyz/v.w;"
 "}"
 "void main()"
 "{"
   "uint T=gl_GlobalInvocationID.x+uint(offs);"
   "vec2 v=vec2(0),x=vec2(0);"
   "float u=float(T)/44100.,m=u,y=float(T%529200)/44100.,p=smoothstep(430.,470.,m),e=1.;"
   "if(u>280.)"
     "{"
       "float s=mod(u,4.),m=exp(-s*10.);"
       "s=35+pow(p,40)*100;"
       "v+=m*sin(y*s*f+sin(y*s*f*10)*m*.2)*20;"
     "}"
   "if(u>250.)"
     "{"
       "float f=2+sin(u)*2e-4;"
       "u*=4;"
       "float T=floor(-u/f),v=mod(-u,f);"
       "u=v+n(T).x*4+(u/4-260)*.6;"
       "e=smoothstep(0.,f*.04,v)*smoothstep(f,f*.98,v)*(1.-p);"
       "y*=.25+float(m>260.)/4+n(T).z*.02;"
     "}"
   "else"
     " u=mix(u,0,pow(clamp((u-230)*.04,0,1),2));"
   "float z=1000;"
   "float[4] t=float[](-12.,1.,3.,10.);"
   "vec2 l=vec2(0);"
   "{"
     "float[7] c=float[](0.,1.,3.,5.,7.,8.,10.);"
     "for(float T=10;T++<2435.;)"
       "{"
         "float v=60./140.*4.,i=u;"
         "i-=v*floor(n(T).z*4);"
         "i-=v*pow(n(T).y,1.2)*(1.+6*smoothstep(10,20,u));"
         "float s=floor(i/(v*4.)),x=smoothstep(0,4,s)/2;"
         "i=mod(i,v*4.);"
         "x=d(c[int(T+s)%7]-12.+12.*float(n(T+s).y<.4*x)+12.*float(n(T+s).x<.4*x)-12.*float(n(T+s).z<.5*x)-12.*float(n(T*1.5+s).z<.5*x)-12.*float(n(T*1.25+s).z<.2*x));"
         "float z=2.+pow(n(T+s).x,2.5)*20.;"
         "for(float c=0;c<z;c++)"
           "{"
             "float e=x,t=1.+smoothstep(0,4,s)*2*exp(-mod(u,1)),g=pow(n(T+c*1.5+s).x,2.+.5*smoothstep(500,2000,e));"
             "e*=1.+floor(g*t);"
             "e+=(n(c+T*1.4).x-.5)*20*smoothstep(0,30,u);"
             "t=exp(-i*(7.-6.*smoothstep(2000,800,e))*.7)*smoothstep(v*2,0,i)*smoothstep(0.,.002,i)*smoothstep(7000,800,e);"
             "vec2 C=vec2(sin(f*e*y+sin(n(T*2.4+s).x*15*y)*4.*smoothstep(10,20,u)+sin(f*e*y*2)*t*t*t*.6*smoothstep(20,60,u)))*r(T);"
             "C=m<260?"
               "mix(C,tanh(C),0.):"
               "C*2.;"
             "l+=t*C/2425./z*2e2*(float(u<60.)+p*4.);"
           "}"
       "}"
   "}"
   "v+=l;"
   "z=400;"
   "for(float T=0.;++T<z;)"
     "{"
       "float i=u-pow(smoothstep(0,1,s(vec3(T)).x),1.2)*(.2+3.*s(vec3(T)).y);"
       "if(T<2)"
         "i=u;"
       "float[4] m=float[](t[0],t[1],t[2],t[3]);"
       "if(mod(i,8)<1)"
         "for(int f=0;f<4;f++)"
           "m[f]+=7;"
       "float x=mix(10,.5+sin(i/2)*2/i*smoothstep(10,20,u),smoothstep(0,60,u));"
       "int n=int(i/x);"
       "x=mod(i,x);"
       "float e=m[n%4]-12*float(s(vec3(n)).x<.2)+12*float(s(vec3(n)).z<.2);"
       "e=d(e+12*float(i>60)-24);"
       "e-=12*float(s(vec3(n)).x<.2);"
       "x=smoothstep(0.,.004,x)*exp(-x*10.);"
       "i=(2+10*smoothstep(60,100,u))*(x*x*sin(y*e*f));"
       "if(T<2)"
         "v+=x*sin(y*e*f+i*smoothstep(1400,500,e))*.3*6;"
       "else"
         "{"
           "vec2 m=vec2(7*x*sin(y*e*f+i*(1-float(u>260)*.4)+d(vec3(1,.5,T),1,1).xy*30))/z*6;"
           "v+=m;"
         "}"
     "}"
   "v*=.14;"
   "z=44.-10.*smoothstep(30.,50.,u);"
   "for(int T=0;T<4;T++)"
     "for(float x=0.;++x<z;)"
       "{"
         "float i=u,e=d(t[T]+12*float(s(vec3(x)).z<.1)+12*float(s(vec3(x)*1e2).x<.1)-12*float(s(vec3(x)).x<.5)-12);"
         "e+=12*float(s(vec3(x)).z<.1);"
         "e-=s(vec3(x)*4.).x*smoothstep(120,144,u)*100;"
         "if(m>340)"
           "i=y*2;"
         "i*=f*e;"
         "vec2 C=d(vec3(fract(i/f))*vec3(2,-3,-8),.5,.4).xy*r(x*.2)-d(vec3(vec2(sin(i),cos(i)),x*.1+float(T)),.5,smoothstep(120,144,u)*2).xy*r(-x*.5);"
         "v+=C/z*.15*smoothstep(60,100,u)*5*smoothstep(250,230,m);"
       "}"
   "{"
     "float C=u,c=.5+sin(C*.5)*2/C,a=mod(C,c),g=d(t[0]-36.+5),b=smoothstep(160,180,u);"
     "a=smoothstep(0.,.04,a)*exp(-a*(20.-15.*b))*smoothstep(c,0.,a);"
     "c=a*a*sin(y*(g*(1+b*10*floor(n(floor(C/c)).x*10)))*f)*(1-.9*b);"
     "a*=smoothstep(100,110,u);"
     "if(u>60&&u<70)"
       "a=exp(-u+60)*4;"
     "if(u>80&&C<100)"
       "a=exp(-mod(u,4))*.4;"
     "x+=a*sin(y*g*f+c)*6;"
   "}"
   "v=clamp(tanh((v*2+x)*1.2*smoothstep(0,5,m))*.7,-1,1);"
   "i[T+3000000]=v*e+tanh(l*p*.2+sin(f*30*m)*10*pow(p,30));"
 "}";

static const char* post_frag =
 "#version 460\n"
 "layout(location=1) uniform float T;"
 "layout(std430,binding=0) coherent buffer Aa{uint v[];};"
 "out vec4 C;"
 "uint u;"
 "uint m(uint f)"
 "{"
   "f=(f^f>>16)*2146121005u;"
   "f=(f^f>>15)*2221713035u;"
   "return f^f>>16;"
 "}"
 "float x(float T)"
 "{"
   "return float(m(uint(T)))/float(-1u);"
 "}"
 "float d()"
 "{"
   "uint f=m(u);"
   "u=f;"
   "return float(f)/float(-1u);"
 "}"
 "uint w(ivec2 f)"
 "{"
   "f+=20;"
   "return(f.x+1320*f.y+uint(1003200))%uint(1003200);"
 "}"
 "float d(inout vec2 f,inout float T,int s,int x)"
 "{"
   "int[148] v=int[](-1,-1,-1,1,-1,1,1,1,-1,1,-1,-1,-1,-1,1,-1,-1,-1,-1,1,-1,1,1,1,-1,0,1,0,-1,1,-1,-1,1,1,1,-1,-1,-1,-1,1,-1,1,1,1,-1,1,-1,-1,1,1,1,-1,-1,-1,-1,1,-1,1,1,1,0,1,0,-1,-1,-1,-1,1,-1,1,1,1,-1,-1,1,-1,-1,1,-1,-1,1,0,1,-1,1,0,0,0,-1,-1,-1,1,-1,1,1,1,-1,-1,1,-1,-1,1,-1,-1,1,1,1,-1,-1,-1,-1,1,-1,1,1,1,-1,-1,1,-1,-1,0,1,0,-1,1,-1,-1,1,1,1,-1,-1,-1,-1,1,-1,0,1,-1,-1,0,1,1,-1,1,-1,-1);"
   "for(int i=s;++i<x+s;)"
     "{"
       "vec2 u=vec2(v[i*4],v[i*4+1]),m=vec2(v[i*4+2],v[i*4+3]);"
       "float C=length(m-u);"
       "vec2 c=(m-u)/C;"
       "u=abs(mat2(c.x,-c.y,c.y,c.x)*(f-(u+m)/2))-vec2(C,.2)/2;"
       "T=min(T,length(max(u,0.))+min(max(u.x-.2,u.y),0.));"
     "}"
   "f.x-=2.5;"
   "return T;"
 "}"
 "void main()"
 "{"
   "float f=float(T>250),s=float(T>280),i=.5+sin(T/2)*2/T,m=.03+.05*smoothstep(90,190,T)-f+s*(.8+3*smoothstep(4,0,mod(T,4))),y=smoothstep(230,250,T)*float(T<250),e=(pow(smoothstep(0,60,T),10.)*pow(x(floor(T)),2)+.9*smoothstep(160,190,T)*exp(-mod(T,i)*40.))*(1-f+s)+y;"
   "u=uint(gl_FragCoord.x+gl_FragCoord.y*1111);"
   "d();"
   "if(T>80&&T<100)"
     "e=100*smoothstep(1,0,mod(T,4.));"
   "uint c=w(ivec2(gl_FragCoord.xy));"
   "vec3 n=vec3(v[c])*1e-4;"
   "float t=n.x*460;"
   "vec3[4] g=vec3[](vec3(1),vec3(1,0,1),vec3(1,1,.1),vec3(.75,1.5,1.5));"
   "vec3 r=mix(g[int(t)%4],g[int(t+1)%4],smoothstep(0,1,fract(t)));"
   "n/=1+n;"
   "n=x(floor(T*.8))<.7?"
     "1-n:"
     "pow(abs(pow(step(n,vec3(.5)),vec3(.02))),vec3(.02));"
   "if(T>60&&T<65)"
     "n=1-n;"
   "if(abs(n.x-.1)<m)"
     "n-=r;"
   "C=pow(abs(n.xyzz),vec4(4.4));"
   "if(T>460)"
     "v[c]=v[c]*400%10000000;"
   "else if(mod(T,9.-s*5+y*5)<1.-float(T>460.))"
     "v[c]=0;"
   "else if(n.x<e)"
     "{"
       "ivec2 f=-ivec2(0,4);"
       "f*=(int(d()<n.x*1111.)*2-1)*(1+5*int(x(floor(T))));"
       "f=f*(int(x(floor(T)*124.)*2.)*2-1)*(1+int(s*smoothstep(3.,0.,mod(T,4.))*20.)+int(y*100))*(1+int(20*smoothstep(130,190,T)*exp(-mod(T,i)*40.)*float(T<250)));"
       "if(T>122&&T<250.)"
         "f=ivec2(f.y,f.x);"
       "if(T>316&&d()>.5)"
         "f-=f;"
       "if(T>280)"
         "f=ivec2(-f.y,f.x);"
       "v[c]=v[w(ivec2(gl_FragCoord.xy)+f)];"
     "}"
   "else"
     " v[c]=0;"
   "if(f>.1)"
     "C=1-C;"
   "if(T>350)"
     "C=vec4(dot(C,C)<.5);"
   "vec2 p=(gl_FragCoord.xy-vec2(1280,720)/2)/720*20;"
   "t=10;"
   "if(int(T)%3==0)"
     "p.x+=3.75,d(p,t,0,4),d(p,t,4,5),d(p,t,9,4),d(p,t,13,3);"
   "else if(int(T)%3==1)"
     "p.x+=1.23,d(p,t,16,6),d(p,t,22,5);"
   "else"
     " p.x+=3.75,d(p,t,27,6),d(p,t,4,5),d(p,t,0,4),d(p,t,33,4);"
   "if(t<0&&(T>420&&T<450))"
     "v[c]+=100000;"
 "}";

static const char* render_comp =
 "#version 460\n"
 "layout(local_size_x=256)in;"
 "layout(std430,binding=0) coherent buffer Aa{uint c[];};"
 "layout(location=1) uniform float Tt;"
 "vec2 e=vec2(1300,740)+20;"
 "float y=acos(-1.);"
 "uint l;"
 "uint m(uint f)"
 "{"
   "f=(f^f>>16)*2146121005u;"
   "f=(f^f>>15)*2221713035u;"
   "return f^f>>16;"
 "}"
 "float x(float f)"
 "{"
   "return float(m(uint(f)))/float(-1u);"
 "}"
 "float d()"
 "{"
   "uint f=m(l);"
   "l=f;"
   "return float(f)/float(-1u);"
 "}"
 "vec3 a(float f)"
 "{"
   "return vec3(x(f),x(f),x(f));"
 "}\n"
 "#define pmod(p,amt)(mod((p+amt*0.5),amt)-amt*0.5)\n"
 "mat2 r(float f)"
 "{"
   "return mat2(cos(f),-sin(f),sin(f),cos(f));"
 "}"
 "float a()"
 "{"
   "return float(d()<.5)*2.-1.;"
 "}"
 "void main()"
 "{"
   "uint f=gl_GlobalInvocationID.x;"
   "l=f+1111111u;"
   "float T=mod(Tt,360),s=float(T>250),i=.5+sin(T/2)*2/T;"
   "i=exp(-mod(T,i)*4);"
   "float u=smoothstep(155,180,T)*smoothstep(250,249,T);"
   "i=(.4*smoothstep(45,15,T)-.1*u*i*(x(T)-.5)+.4*smoothstep(314,320,T)*i)*(1.-s);"
   "bool v=mod(T,8)<2,m=x(floor(T+1555))>.5;"
   "float C=.2+.4*smoothstep(60,80,T)-.4*smoothstep(90,110,T)-.4*smoothstep(120,160,T)-.2*u;"
   "if(T<10)"
     "v=false;"
   "int n=30+int(200*smoothstep(25,65,T));"
   "float p=T;"
   "p+=sin(p)*.8;"
   "vec3 t=vec3(0),g=vec3(d(),d(),d()),z=a(floor(T)),b=vec3(1,0,0);"
   "if(g.y<.5)"
     "b=vec3(0,-1,0);"
   "b*=1+.02*smoothstep(90,150,T)-u*.8;"
   "z*=1-smoothstep(90,110,T)+smoothstep(90,150,T);"
   "for(int u=0;u<n;u++)"
     "{"
       "float l=d();"
       "t+=b*(.002*(1+20*z.x)+sin(float(f.x))*.01);"
       "if(g.y<.5)"
         "{"
           "if(u%10==0)"
             "b+=t;"
           "if(u%50==10)"
             "b.yz*=r(y*a()/4);"
           "if(u==20+int(sin(T)*45))"
             "{"
               "b.xy*=r(y*a()/4+T);"
               "if(z.z>.5)"
                 "t.xy*=r(z.x);"
             "}"
           "if(z.x>.7)"
             "t=t/(dot(t,t)-.1+sin(T)*.5+.5)*(1.+sin(T+sin(T)));"
         "}"
       "else if(g.y<1.)"
         "{"
           "if(u==20)"
             "b.xz*=r(.25*y);"
           "if(u%50==50+int(sin(T*.6)*45))"
             "b.yz*=r(y*a()/4),t+=b;"
           "if(u==20+int(sin(T*.3+float(f))*25))"
             "t+=b*(1.+p),b.xy*=r(.5*y*a());"
         "}"
       "t=abs(i)>1e-4?"
         "pmod(t,3+i):"
         "pmod(t,3);"
       "vec3 A=t;"
       "if(v)"
         "{"
           "A=sin(A*5+T);"
           "A.xz*=r(T*2+sin(T*2)+i*100);"
           "if(m)"
             "A=A/(dot(A,A)-.2+i)+.4,A/=dot(A,A)-.2,A.xz*=r(T);"
         "}"
       "else"
         " A.xz*=r(floor(x(floor(T+50))*4)/4*y*2);"
       "A.z+=4;"
       "if(T<316)"
         "A.xy/=A.z*C;"
       "A.x=A.x*e.y/e.x+10*(d()-.5)*abs(A.z-sin(T*9)*4*float(T>280))*s*(1-smoothstep(314,320,T));"
       "uvec2 D=uvec2((A.xy/2.+.5)*e);"
       "uint w=D.x+uint(e.x)*D.y;"
       "atomicAdd(c[w],7);"
       "atomicAdd(c[w*(1+uint(z.x*6+T)%2)%uint(e.x*e.y)],uint(111));"
     "}"
 "}";

#endif // SHADER_INCLUDES_H_
